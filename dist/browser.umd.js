() => configAddon || ''
(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a="undefined"==typeof globalThis?a||self:globalThis,a.jsWebWorker=b())})(this,function(){'use strict';function a(b){"@babel/helpers - typeof";return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a(b)}function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function d(a,b,d){return b&&c(a.prototype,b),d&&c(a,d),a}function e(a,b){var c=b.get(a);if(!c)throw new TypeError("attempted to get private field on non-instance");return c.get?c.get.call(a):c.value}function f(a,b,c){var d=b.get(a);if(!d)throw new TypeError("attempted to set private field on non-instance");if(d.set)d.set.call(a,c);else{if(!d.writable)throw new TypeError("attempted to set read only private field");d.value=c}return c}function g(a,b,c){if(!b.has(a))throw new TypeError("attempted to get private field on non-instance");return c}var h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakMap,l=new WeakMap,m=new WeakMap,n=new WeakMap,o=new WeakMap,p=new WeakMap,q=new WeakMap,r=new WeakSet,s=new WeakSet,t=new WeakSet,u=new WeakSet,v=new WeakSet,w=new WeakSet,x=function(){function c(a){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Worker,g=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];b(this,c),w.add(this),v.add(this),u.add(this),t.add(this),s.add(this),r.add(this),h.set(this,{writable:!0,value:void 0}),i.set(this,{writable:!0,value:void 0}),j.set(this,{writable:!0,value:void 0}),k.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),n.set(this,{writable:!0,value:void 0}),o.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:void 0}),q.set(this,{writable:!0,value:void 0}),this.data=a,f(this,h,parseInt(d,10)),f(this,i,e),f(this,j,g),f(this,l,null),f(this,m,null),f(this,n,[]),f(this,o,[]),f(this,p,[]),f(this,q,{}),f(this,k,Promise.resolve(a))}return d(c,[{key:"env",value:function(a,b){return e(this,q)[a]=b,this}},{key:"imports",value:function(){for(var b=this,c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return d.forEach(function(c){switch(a(c)){case"string":e(b,o).push("'".concat(c,"'"));break;case"function":e(b,n).push({name:c.name,code:c});break;default:e(b,n).push(c);}}),this}},{key:"unpkg",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return f(this,p,b.map(function(a){return"'https://unpkg.com/".concat(a,"'")})),this}},{key:"exec",value:function(a){var b=this;return this.data?(f(this,k,e(this,k).then(function(){var c=a.toString(),d=g(b,u,B).call(b,c);return new Promise(function(a){d.postMessage(b.data),d.addEventListener("message",function(c){b.data=c.data,g(b,w,D).call(b,[d]),a(b.data)})})})),this):this}},{key:"map",value:function(a){var b=this;return this.data?(f(this,k,e(this,k).then(function(){function c(a,b){return e===i.length&&(e=0),i[e++].postMessage({v:a,k:b})}var d=+b.data.length,e=0,f=[],h="o => { const task = ".concat(a,", r = ").concat("task(o.v, o.k)","; return ").concat("{ v: r, k: o.k }"," }"),i=g(b,v,C).call(b,h),j=function(a){return b.data=f,g(b,w,D).call(b,i),a(b.data)};return new Promise(function(a){function e(b){return f[b.data.k]=b.data.v,--d||j(a)}i.forEach(function(a){return a.addEventListener("message",e)}),b.data.forEach(function(a,d){return g(b,r,y).call(b,c,a,d)})})})),this):this}},{key:"reduce",value:function(a,b){var c=this;return this.data?(f(this,k,e(this,k).then(function(){function d(a){Array.isArray(a[0])&&(a=a.reduce(function(b,a){return b.concat(a)},[])),o.postMessage({a:a,r:b})}function e(a){return i===m.length&&(i=0),m[i++].postMessage({a:a,r:b})}function f(a){return l.push(a.data),--h||d(l)}var h=0,i=0,j=100,k=[],l=[],m=[],n="o => o.a.reduce(".concat(a,", o.r)"),o=g(c,u,B).call(c,n),p=function(a,b){return g(c,w,D).call(c,m.concat(o)),c.data=b,a(c.data)};return new Promise(function(a){if(o.addEventListener("message",function(b){return p(a,b.data)}),c.data.length<=j)return d(c.data);for(m=g(c,v,C).call(c,n),m.forEach(function(a){return a.addEventListener("message",f)});c.data.length;)k.push(c.data.splice(0,j));return h=parseInt(k.length),k.forEach(function(a){return g(c,r,y).call(c,e,a)})})})),this):this}},{key:"filter",value:function(a){if(!this.data)return this;var b="a => a.filter(".concat(a,")");return this.exec(b)}},{key:"sort",value:function(a){if(!this.data)return this;var b="a => a.sort(".concat(a,")");return this.exec(b)}},{key:"flat",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!this.data)return this;var b="a => a.flat(".concat(a,")");return this.exec(b)}},{key:"flatMap",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.data?this.flat(b).map(a):this}},{key:"then",value:function(a){var b=this;return f(this,k,e(this,k).then(function(){return a(b.data)})),this}},{key:"finally",value:function(a){var b=this;return e(this,k).then(function(){return a(b.data)})}}]),c}(),y=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return e(this,j)?setImmediate.apply(void 0,[a].concat(c)):setTimeout.apply(void 0,[a,1].concat(c))},z=function(a){var b=["\"use strict\""],c=JSON.stringify(e(this,q)),d=e(this,o).join(","),g=e(this,p).join(","),h=["const env = ".concat(c,", job = ").concat(a,";"),"self.addEventListener(\"message\", e => {","const result = job(e.data);","self.postMessage(result);","})"].join(" ");return d.length&&b.push("importScripts(".concat(d,")")),g.length&&b.push("importScripts(".concat(g,")")),e(this,n).forEach(function(a){var c=a.name?"const ".concat(a.name," = ").concat(a.code):a.code.toString();b.push(c)}),f(this,l,b.concat(h).join("\n")),e(this,l)},A=function(a){var b=new Blob([a],{type:"application/javascript"});return f(this,m,URL.createObjectURL(b)),e(this,m)},B=function(a){var b=e(this,l)||g(this,s,z).call(this,a),c=e(this,j)?new Function(b):e(this,m)||g(this,t,A).call(this,b);return new(e(this,i))(c)},C=function(a){for(var b=[],c=e(this,h);0<c;c--)b.push(g(this,u,B).call(this,a));return b},D=function(a){f(this,l,null),a.forEach(function(a){return a.terminate()}),e(this,m)&&(URL.revokeObjectURL(e(this,m)),f(this,m,null))};return function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:navigator.hardwareConcurrency;return new x(a,b)}});
